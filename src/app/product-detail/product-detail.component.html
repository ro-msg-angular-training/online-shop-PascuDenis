<div *ngIf="product" class="flex-container">
  <h2>{{product.name | uppercase}} Details</h2>
  <div class="container">

    <form #productForm="ngForm" appIdentityRevealed>
      <div [hidden]="productForm.submitted">
        <div class="cross-validation"
          [class.cross-validation-error]="productForm.errors?.identityRevealed && (productForm.touched || productForm.dirty)">
          <div class="form-group">
            <label for="id">Id: </label>
            <input type="text" id="id" name="id" class="form-control" required minlength="4" [(ngModel)]="product.id"
              [value]="this.id" #description="ngModel">
            <div *ngIf="id.invalid && (id.dirty || id.touched)" class="alert alert-danger">
              <div *ngIf="id.errors.required">
                Id is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="name">Name: </label>
            <input type="text" id="name" name="name" class="form-control" required minlength="3"
              [(ngModel)]="product.name" [value]="this.name" #name="ngModel">
            <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
              <div *ngIf="name.errors.required">
                Name is required.
              </div>
              <div *ngIf="name.errors.minlength">
                Name must be at least 3 characters long.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="description">Description: </label>
            <input type="text" id="description" name="description" class="form-control" required minlength="4"
              [(ngModel)]="product.description" [value]="this.description" #description="ngModel">
            <div *ngIf="description.invalid && (description.dirty || description.touched)" class="alert alert-danger">
              <div *ngIf="description.errors.required">
                Description is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="price">Price: </label>
            <input type="text" id="price" name="price" class="form-control" required minlength="4"
              [(ngModel)]="product.price" [value]="this.price" #price="ngModel" pattern="^\d*\.?\d*$">
            <div *ngIf="price.invalid && (price.dirty || price.touched)" class="alert alert-danger">
              <div *ngIf="price.errors.required">
                Price is required.
              </div>
              <div *ngIf="price.errors.pattern">
                Price must be of numeric value.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="weight">Weight: </label>
            <input type="text" id="weight" name="weight" class="form-control" required minlength="4"
              [(ngModel)]="product.weight" [value]="this.weight" #weight="ngModel" pattern="^\d*\.?\d*$">
            <div *ngIf="weight.invalid && (weight.dirty || weight.touched)" class="alert alert-danger">
              <div *ngIf="weight.errors.required">
                Weight is required.
              </div>
              <div *ngIf="weight.errors.pattern">
                Weight must be of numeric value.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="productCategoryId">Categoty ID: </label>
            <select [(ngModel)]="product.productCategoryId" (change)="getCategoryById($event.target.value)"
              id="category" name="category">
              <option *ngFor="let category of categories" value="{{category.id}}"
                [class.selected]="category === selectedCategory">
                {{category.name}}</option>
            </select>
          </div>

          <div class="form-group">
            <label for="supplierId">Supplier ID: </label>
            <select [(ngModel)]="product.supplierId" (change)="getSupplierById($event.target.value)" id="supplier"
              name="supplier">
              <option *ngFor="let supplier of suppliers" value="{{supplier.id}}"
                [class.selected]="supplier === selectedSupplier">
                {{supplier.name}}</option>
            </select>
          </div>
          <div class="form-group-button">
            <button (click)="goBack()">Return to products</button>
            <button type="button" class="btn btn-default" (click)="productForm.resetForm({})">Reset</button>
            <br><br>
            <button type="submit"
              (click)="addProduct(product.id, product.name, product.description, product.price, product.weight, product.productCategoryId, product.supplierId)"
              id="addButton">Add</button>
            <button type="submit" (click)="removeProduct()" id="deleteButton">Remove</button>
            <button type="submit"
              (click)="updateProduct(product.id, product.name, product.description, product.price, product.weight, product.productCategoryId, product.supplierId)"
              id="updateButton">Update</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>